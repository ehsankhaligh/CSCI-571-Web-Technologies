<!DOCTYPE html>
<html lang="en">
   <head>
      <title>Bootstrap Example</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
   </head>
   <body>
      <div id="page-container">
         <div id="content-wrap">
            <div id="backgroundimage"></div>
            <br>
            <div *ngIf="classReference.buyhideflag==true" (mousemove)="clearBoxBuySellAutohide()" class="container mt-5" id="msgoutput">
               <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
               <div class="alert alert-success text-center text-dark alert-dismissible"  role="alert">
                 Buy transaction successfully executed.
                  <button type="button" id="mybtn" class="btn btn-link"><span class="bi bi-x" (click)="clearBoxBuySell()"></span></button>
               </div>
            </div>
            <div *ngIf="classReference.sellhideflag==true" (mousemove)="clearBoxBuySellAutohide()" class="container mt-5" id="msgoutput">
               <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
               <div class="alert alert-danger text-center text-dark alert-dismissible" role="alert">
                 Sell transaction successfully executed.
                  <button type="button" id="mybtn" class="btn btn-link"><span class="bi bi-x" (click)="clearBoxBuySell()"></span></button>
               </div>
            </div>
            <div *ngIf="(this.ShowNotificationStarSelectedFlag == false) && (ShowHideFlag == true)" class="container mt-5" id="msgoutput">
               <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
               <div class="alert alert-danger text-center text-dark alert-dismissible" role="alert">
                  {{  aboutcompany['ticker'] }} removed from watchlist.
                  <button type="button" id="mybtn" class="btn btn-link"><span class="bi bi-x" (click)="clearBox()"></span></button>
               </div>
            </div>
            <div *ngIf="(this.ShowNotificationStarSelectedFlag == true) && (ShowHideFlag == true)" class="container mt-5" id="msgoutput">
               <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
               <div class="alert alert-success text-center text-dark alert-dismissible" role="alert">
                  {{  aboutcompany['ticker'] }} added to watchlist.
                  <button type="button" id="mybtn" class="btn btn-link"><span class="bi bi-x" (click)="clearBox()"></span></button>
               </div>
            </div>
            <div id="topInfo">
               <div class="row">
                  <div class="col">
                     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
                     <h2 class="m-0 p-0 d-flex  latest-last" id="ticker"> {{  aboutcompany['ticker'] }}<button type="button" class="btn btn-link"><span [ngClass]="! starSelectedFlag ? 'bi bi-star' : 'bi bi-star-fill yellow-color'" (click)="StarListener()"></span></button></h2>
                     <h4 class="m-0 p-0 d-flex flex-auto latest-last" id="comName"> {{  aboutcompany['name'] }} </h4>
                     <h6 class="m-0 p-0 d-flex flex-auto latest-last" id="exchange"> {{  aboutcompany['exchange'] }} </h6>
                     <button class="btn btn-primary m-0 p-1 px-2 bg-success border-0" id="btnBuy" (click)="popBuyShareBox()"> Buy </button>
                     <button class="btn btn-primary m-0 p-1 px-2 btn-danger border-0" id="btnSell" (click)="popSellShareBox()"> Sell </button>
                  </div>
                  <div class="col" id="centerIMG">
                     <img src="{{ aboutcompany['logo'] }}" alt="company logo" style='width:100px;height:100' class="img-fluid">
                  </div>
                  <div class="col" id="mystockpricesection">
                     <p  class="m-0 p-0 d-flex flex-row-reverse change-latest" id="price" style="{{priceColor}}"> ${{ stockPrice["c"] }} </p>
                     <p class="m-0 p-0 d-flex flex-row-reverse latest-last" id="priceChange" style="{{priceColor}}"> ${{ stockPrice["d"] }} ( {{stockPrice["dp"]}} %) </p>
                     <p class="m-0 p-0 d-flex flex-row-reverse latest-last" id="stockdate"> {{ stockPrice["t"] }} </p>
                  </div>
               </div>
               <br>
               <div id="marketStatus">
                  <div *ngIf="closeflag == true" class="alert alert-danger border-0 p-0 d-inline-flex mx-auto" role="alert">
                     Market Closed on {{ stockPrice["t"] }}
                  </div>
                  <div *ngIf="openFlag == true" class="alert alert-success border-0 p-0 d-inline-flex mx-auto" role="alert">
                     Market is Open
                  </div>
               </div>
            </div>
            <mat-tab-group mat-stretch-tabs>
               <mat-tab label="Summary">
                  <br>
                  <div class="container" id='mysummary'>
                     <div class="row row-cols-1">
                        <div class="col">
                           <div class="row">
                              <div class="col">
                                 <p class="m-0">
                                    High Price: ${{ stockPrice["h"] }} <br>
                                    Low Price: ${{ stockPrice["l"] }} <br>
                                    Open Price: ${{ stockPrice["o"] }} <br>
                                    Prev. Close: ${{ stockPrice["pc"] }}
                                 </p>
                              </div>
                              <div class="col">
                                 <p class="m-0" >
                                    IPO Start Date: {{ aboutcompany["ipo"] }} <br>
                                    Industry:{{ aboutcompany["finnhubIndustry"] }} <br>
                                    Webpage: <a href="{{aboutcompany['weburl']}}" target="_blank">{{ aboutcompany["weburl"] }}</a><br>
                                 </p>
                              </div>
                              <div class="col">
                                 <p class="m-0" >
                                    Company Peers (website):
                                    <ng-container *ngFor="let peer of companyPeers">
                                       <a rel='stylesheet' href="{{peer.weburl}}" target="_blank"> {{peer.item}},</a>&nbsp;
                                    </ng-container>
                                 </p>
                              </div>
                           </div>
                        </div>
                        <div class="col">
                           <br><br>
                           <ng-container *ngIf="chartOptions">
                              <highcharts-chart
                              *ngIf="isHighcharts"
                              [Highcharts]="Highcharts"
                              [options]="chartOptions"
                              style="width: auto; height: auto; display: block;"
                              ></highcharts-chart>
                           </ng-container>
                        </div>
                     </div>
                  </div>
               </mat-tab>
               <mat-tab label="Top News">
                  <br>
                  <div class="container">
                     <div class="row" >
                        <div class="col-sm-6 border border-dark" *ngFor="let item of newsdata">
                           <div class="card-body row" (click)="popNewsDetailsShareBox(item)">
                              <img src="{{ item.image }}"  class="img-rounded" alt="Responsive Image" width="100px" height="100px"/>
                              <div class="col my-auto">
                                 <h5 class="card-title text-black-50">{{ item.headline }}</h5>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </mat-tab>
               <mat-tab label="Charts">
                  <br>
                  <div class="container" id="charts-content">
                     <highcharts-chart
                     class="col-sm"
                     *ngIf="isHighcharts"
                     [Highcharts]="Highcharts"
                     [constructorType]="'stockChart'"
                     [options]="chartsSectionStockChart"
                     style="width: 100%; height: auto; display: block"
                     >
                   </highcharts-chart>
                  </div>
               </mat-tab>
               <mat-tab label="Insights">
                  <br>
                  <div class="row">
                     <div class="col">
                        <ng-container *ngIf="(flagChats == true) && (tdbodyflag == true)">
                           <table class="table table-sm">
                              <thead>
                                 <tr class="table-active">
                                    <th scope="col">{{aboutcompany['name']}}</th>
                                    <th scope="col">Reddit</th>
                                    <th scope="col">Twitter</th>
                                 </tr>
                              </thead>
                              <ng-template [ngIf]="showDataflag == true">
                                 <tbody>
                                    <tr>
                                       <td class="table-active">Total Mentions</td>
                                       <td >{{companySocialSentReddit[0].mention}}</td>
                                       <td >{{companySocialSentTwitter[0].mention}}</td>
                                    </tr>
                                    <tr>
                                       <td class="table-active">Positive Mentions</td>
                                       <td>{{companySocialSentReddit[0].positiveMention}}</td>
                                       <td>{{companySocialSentTwitter[0].positiveMention}}</td>
                                    </tr>
                                    <tr>
                                       <td class="table-active">Negative Mentions</td>
                                       <td>{{companySocialSentReddit[0].positiveMention}}</td>
                                       <td>{{companySocialSentTwitter[0].negativeMention}}</td>
                                    </tr>
                                 </tbody>
                              </ng-template>
                           </table>
                        </ng-container>
                     </div>
                  </div>
                  <div class="row">
                     <br>
                     <div class="col-md-6 .offset-md-3">
                        <ng-container *ngIf="recomChart">
                           <highcharts-chart
                           class="col-sm"
                           *ngIf="isHighcharts"
                           [Highcharts]="Highcharts"
                           [options]="recomChart"
                           style="width: 100%; height: 100%; display: block;"
                           ></highcharts-chart>
                        </ng-container>
                     </div>
                     <div class="col-md-6 .offset-md-3">
                        <ng-container *ngIf="espChart">
                           <highcharts-chart
                           class="col-sm"
                           *ngIf="isHighcharts"
                           [Highcharts]="Highcharts"
                           [options]="espChart"
                           style="width: auto; auto: 450px; display: block;"
                           ></highcharts-chart>
                        </ng-container>
                     </div>
                  </div>
               </mat-tab>
            </mat-tab-group>
         </div>
         <footer id="footer" style="background-color:rgb(115, 147, 179);">Powered by <a href=" https://finnhub.io" target="_blank">Finnhub.io</a>
         </footer>
      </div>
   </body>
</html>
